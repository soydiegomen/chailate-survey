!function(){"use strict";angular.module("chaiApp",["surveyApp.core","surveyApp.widgets","surveyApp.home","surveyApp.sentMessage"])}();
!function(){"use strict";angular.module("blocks.router",["ngRoute"])}();
!function(){"use strict";angular.module("surveyApp.core",["ngRoute","blocks.router"])}();
!function(){"use strict";angular.module("surveyApp.home",[])}();
!function(){"use strict";angular.module("surveyApp.sentMessage",[])}();
!function(){"use strict";angular.module("surveyApp.widgets",[])}();
!function(){"use strict";function routehelperConfig(){this.config={},this.$get=function(){return{config:this.config}}}function routehelper($location,$rootScope,$route,routehelperConfig){function configureRoutes(routes){routes.forEach(function(route){route.config.resolve=angular.extend(route.config.resolve||{},routehelperConfig.config.resolveAlways),$routeProvider.when(route.url,route.config)}),$routeProvider.otherwise({redirectTo:"/"})}function handleRoutingErrors(){$rootScope.$on("$routeChangeError",function(event,current,previous,rejection){if(!handlingRouteChangeError){routeCounts.errors++,handlingRouteChangeError=!0;var destination=current&&(current.title||current.name||current.loadedTemplateUrl)||"unknown target";"Error routing to "+destination+". "+(rejection.msg||"");$location.path("/")}})}function init(){handleRoutingErrors(),updateDocTitle()}function getRoutes(){for(var prop in $route.routes)if($route.routes.hasOwnProperty(prop)){var route=$route.routes[prop],isRoute=!!route.title;isRoute&&routes.push(route)}return routes}function updateDocTitle(){$rootScope.$on("$routeChangeSuccess",function(event,current,previous){routeCounts.changes++,handlingRouteChangeError=!1;var title=routehelperConfig.config.docTitle+" "+(current.title||"");$rootScope.title=title})}var handlingRouteChangeError=!1,routeCounts={errors:0,changes:0},routes=[],$routeProvider=routehelperConfig.config.$routeProvider,service={configureRoutes:configureRoutes,getRoutes:getRoutes,routeCounts:routeCounts};return init(),service}angular.module("blocks.router").provider("routehelperConfig",routehelperConfig).factory("routehelper",routehelper),routehelper.$inject=["$location","$rootScope","$route","routehelperConfig"]}();
!function(){"use strict";function analyticsservice($http,appConfig,$window,$location){function trackPageView(){$window.ga?$window.ga("send","pageview",{page:$location.url()}):reportAnalyticsOff()}function trackEvent(category,action,info){$window.ga?$window.ga("send",{hitType:"event",eventCategory:category,eventAction:action,eventLabel:info}):reportAnalyticsOff()}function reportAnalyticsOff(){console.log("GOOGLE ANALYTICS IS OFF")}var service={trackPageView:trackPageView,trackEvent:trackEvent};return service}angular.module("surveyApp.core").factory("analyticsservice",analyticsservice),analyticsservice.$inject=["$http","appConfig","$window","$location"]}();
!function(){"use strict";function configure($routeProvider,routehelperConfigProvider,$locationProvider){routehelperConfigProvider.config.$routeProvider=$routeProvider,routehelperConfigProvider.config.docTitle="NG-Modular: "}var core=angular.module("surveyApp.core");core.constant("appConfig",{apiBaseUrl:"http://104.131.137.249/"}),core.config(configure)}();
!function(){"use strict";function dataservice($http,appConfig){function getChailateSurvey(surveyid){function getSurveyComplete(data,status,headers,config){return data.data}var serviceUrl="http://localhost:3000/api/survey/"+surveyid;return $http.get(serviceUrl).then(getSurveyComplete).catch(function(message){console.log("Error in getChailateSurvey. Message:"+message)})}function saveAnswer(answer){function saveAnswerComplete(data,status,headers,config){return data.data}var jsonAnswer=JSON.stringify(answer),serviceUrl="http://localhost:3000/api/answers";return $http.post(serviceUrl,jsonAnswer).then(saveAnswerComplete)}var service={getChailateSurvey:getChailateSurvey,saveAnswer:saveAnswer};return service}angular.module("surveyApp.core").factory("dataservice",dataservice),dataservice.$inject=["$http","appConfig"]}();
!function(){"use strict";function appRun(routehelper){routehelper.configureRoutes(getRoutes())}function getRoutes(){return[{url:"/",config:{templateUrl:"js/app/home/home.html",controller:"HomeCtrl",controllerAs:"homeCtrl"}},{url:"/servicio/:key?",config:{templateUrl:"js/app/home/home.html",controller:"HomeCtrl",controllerAs:"homeCtrl"}}]}angular.module("surveyApp.home").run(appRun)}();
!function(){"use strict";function HomeCtrl($routeParams,$location,dataservice){function activate(){console.log("Activated HomeCtrl"),console.log($routeParams.key),getChailateSurvey()}function saveSurvey(){var answer=buildAnswer();null!==answer?saveAnswer(answer).then(function(data){return navToSuccessView(),data}).catch(function(message){console.log("Error in saveSurvey: "+message),navToSuccessView()}):navToSuccessView()}function getChailateSurvey(){return dataservice.getChailateSurvey("58b25da09a6fffc80200000b").then(function(data){return homeCtrl.survey=data,data})}function saveAnswer(answer){return dataservice.saveAnswer(answer)}function navToSuccessView(){$location.path("/sent-message")}function buildAnswer(){var answer=null;if(homeCtrl.survey){answer={surveyId:homeCtrl.survey._id,key:"",usedTime:0,details:[]},$routeParams.key&&(answer.key=$routeParams.key);var currentDate=new Date,dif=currentDate.getTime()-homeCtrl.initTime.getTime();answer.usedTime=Math.abs(dif/1e3),answer.details=getAnswerDetails()}return answer}function getAnswerDetails(){var details=[],questions=homeCtrl.survey.questions;return questions.forEach(function(entry){var answerDet={questionId:entry._id,value:null};switch(entry.code){case"question-one":answerDet.value=homeCtrl.fstAnswer;break;case"question-two":answerDet.value=homeCtrl.secAnswer;break;case"question-three":answerDet.value=homeCtrl.thirdAnswer;break;case"question-four":answerDet.value=homeCtrl.fourthAnswer;break;case"question-five":answerDet.value=homeCtrl.commentsAnswer}details.push(answerDet)}),details}var homeCtrl=this;homeCtrl.saveSurvey=saveSurvey,homeCtrl.survey=null,homeCtrl.initTime=new Date,homeCtrl.fstAnswer="",homeCtrl.secAnswer="",homeCtrl.thirdAnswer="",homeCtrl.fourthAnswer="",homeCtrl.commentsAnswer="",activate()}angular.module("surveyApp.home").controller("HomeCtrl",HomeCtrl),HomeCtrl.$inject=["$routeParams","$location","dataservice"]}();
!function(){"use strict";function appRun(routehelper){routehelper.configureRoutes(getRoutes())}function getRoutes(){return[{url:"/sent-message",config:{templateUrl:"js/app/sent-message/sent-message.html",controller:"SentMessageCtrl",controllerAs:"sentMessageCtrl"}}]}angular.module("surveyApp.sentMessage").run(appRun)}();
!function(){"use strict";function SentMessageCtrl(){function activate(){console.log("Activated SentMessageCtrl")}activate()}angular.module("surveyApp.sentMessage").controller("SentMessageCtrl",SentMessageCtrl)}();
!function(){"use strict";function loadingIndicator($rootScope){var htmlTemplate='<div class="container" ng-if="isRouteLoading"><div class="row"><div class="col-md-12 text-center"><h1 class="loading-indicator">Cargando ... <i class="fa fa-cog fa-spin"></i></h1></div></div></div>',directive={restrict:"EA",template:htmlTemplate,link:function(scope,elem,attrs){scope.isRouteLoading=!1,$rootScope.$on("$routeChangeStart",function(){scope.isRouteLoading=!0}),$rootScope.$on("$routeChangeSuccess",function(){scope.isRouteLoading=!1})}};return directive}angular.module("surveyApp.widgets").directive("loadingIndicator",loadingIndicator),loadingIndicator.$inject=["$rootScope"]}();